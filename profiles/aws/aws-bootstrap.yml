parents:
  - aws-config

profile:
  base-network:
    module: cluster
    profile: aws-network
    operations: run

  cenv-network:
    requires: base-network
    profile: aws-network

  cenv-admin:
    requires: cenv-network
    profile: aws-server

  percona-cluster:
    requires: cenv-admin
    host: "@admin_server_host_name"
    module: percona
    profile: aws-cluster
    users_present:
      "@admin_cluster_database_user":
        password: "@admin_cluster_password"
        privileges:
          - "@admin_cluster_database.*:ALL"
        host: "%"
    databases_present:
      "@admin_cluster_database":
        collation: utf8_general_ci
        encoding: utf8

  # cenv-cluster:
  #   requires: percona-cluster
  #   host: "@admin_server_host_name"
  #   profile: aws-cluster
