parents:
  - aws-config

profile:
  base-network:
    module: cluster
    profile: aws-network
    operations: run

  mcmi-network:
    requires: base-network
    profile: aws-network
    operations: run

  percona-cluster:
    requires: base-network
    module: percona
    profile: aws-cluster

  redis-cluster:
    requires: base-network
    module: redis
    profile: aws-cluster
    config:
      redis_password: "@admin_cluster_redis_password"

  mcmi-cluster:
    profile: aws-cluster
    deploy_mcmi: false
    requires:
      - mcmi-network
      - percona-cluster
      - redis-cluster
